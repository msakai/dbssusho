フィルタに渡されるマスクをフィルターの結果のデータの書き込みの透明度に使ってはなりません。
つまり、マスクの値が０以外の部分に一様に書き込まなくてはなりません。
もちろん、マスクが０の部分に書き込んでもOKです。
ようするに、データの取得にマスクを使えということらしいです。